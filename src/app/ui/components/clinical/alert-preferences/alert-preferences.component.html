<p-accordionTab>
    <p-header class="w-100">
        <div class="acc-tab">
            <span>Alert preferences</span>
            <div>
                <button *ngIf="mode=='view'" pButton type="button" label="Edit" class="btn btn-primary" (click)="$event.stopPropagation();edit()"
                    [disabled]="isEditable"></button>
                <button *ngIf="mode=='edit'" pButton type="button" label="Save" class="btn btn-primary"
                    (click)="$event.stopPropagation();save()"></button>
                <button *ngIf="mode=='edit'" pButton type="button" label="Cancel" class="btn btn-secondary ml-2"
                    (click)="$event.stopPropagation();close()"></button>
            </div>
        </div>
    </p-header>
    <div>
        <p-table class="ColumnFilterTable" #dt [value]="lstResidentAlert" datakey="AlertHeadName"
            [globalFilterFields]="['AlertName']" [scrollable]="true" scrollHeight="calc(100vh - 400px)"
            responsiveLayout="scroll">
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="columns?.length">
                        No records found
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item let-i="rowIndex">
                <tr style="border-top:1px solid #e3e3e3" *ngIf="rowGroupMetadata[item.AlertHeadName].index == i">
                    <td [colSpan]="mode=='edit'?2:1" style="font-weight:bold;font-size: 16px; width: 100%;">
                       <span>{{item.AlertHeadName}}</span>
                    </td>
                </tr>
                <tr>
                    <td style="width:5%;" *ngIf="mode=='edit'">
                        <span>
                            <p-checkbox (onChange)="OnEnabled(item.ClinicalAlertPreferencesId)" name="ChkEnable_{{i}}"
                                [(ngModel)]="item.Isenable" [binary]="true" inputId="binary"></p-checkbox></span>
                    </td>
                    <td [ngStyle]="{'width':mode=='edit'? '95%' : '100%'}">
                        <span *ngIf="mode=='edit'">Enable <b>{{item.AlertName}}</b> alert for this resident
                            {{item.Isenable?'':' - alert disabled for this facility'}}</span>
                        <span *ngIf="mode=='view'">{{item.AlertName}} is <span
                                [ngStyle]="{'font-weight':item.Isenable? 'bold' : 'normal'}">{{item.Isenable?'Enabled':'Disabled'}}</span>
                            for this resident</span>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</p-accordionTab>