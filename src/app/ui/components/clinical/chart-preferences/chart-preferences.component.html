<p-accordionTab>
    <p-header class="w-100">
        <div class="acc-tab">
            <span>Chart preferences</span>
            <div>
            <button *ngIf="mode=='view'" pButton type="button" label="Edit" class="btn btn-primary"
                (click)="edit()"></button>
            <button *ngIf="mode=='edit'" pButton type="button" label="Save" class="btn btn-primary"
                (click)="$event.stopPropagation();save()"></button>
            <button *ngIf="mode=='edit'" pButton type="button" label="Cancel" class="btn btn-secondary ml-2"
                (click)="close()"></button>
            </div>
        </div>
</p-header>
<div>
    <p-table class="ColumnFilterTable" #dt [value]="lstResidentChart" datakey="chartheadname"
    [globalFilterFields]="['chartname']" [scrollable]="true" scrollHeight="calc(100vh - 400px)"
    responsiveLayout="scroll">
    <ng-template pTemplate="emptymessage" let-columns>
        <tr>
            <td [attr.colspan]="columns?.length">
                No records found
            </td>
        </tr>
    </ng-template>    
    <ng-template pTemplate="body" let-item let-i="rowIndex">
        <tr *ngIf="rowGroupMetadata[item.chartheadname].index == i">
            <td colSpan="2" style="font-weight:bold;font-size: 20px;">
                <span>{{item.chartheadname}}</span>
            </td>
        </tr>
        <tr>                      
            <td style="width:30px;">                
                <span *ngIf="mode=='edit'">
                    <p-checkbox (onChange)="OnEnabled(item.clinicalchartpreferencesid)"
                        name="ChkEnable_{{i}}" [(ngModel)]="item.isenable" [binary]="true"
                        inputId="binary"></p-checkbox></span>
            </td>
            <td style="width: 300px;">
                <span *ngIf="mode=='edit'">Enable <b>{{item.chartname}}</b> chart for this resident {{item.isenable?'':' - chart disabled for this facility'}}</span>
                <span *ngIf="mode=='view'">{{item.chartname}} is <span [ngStyle]="{'font-weight':item.isenable? 'bold' : 'normal'}">{{item.isenable?'Enabled':'Disabled'}}</span> for this resident</span>
            </td>
            
        </tr>
    </ng-template>
</p-table>  
</div>
</p-accordionTab>



