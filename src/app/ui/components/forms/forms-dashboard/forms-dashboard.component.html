<!-- Search Filter Card -->
<div class="card">
    <div class="row d-flex align-items-center">
        <div class="col-md-3">
            <div class="form-group">
                <label class="form-label">
                    From Date / To Date <span class="required">*</span></label
                >
                <p-calendar
                    [(ngModel)]="rangeDates"
                    selectionMode="range"
                    [readonlyInput]="true"
                    placeholder="Date Range"
                ></p-calendar>
            </div>
        </div>
        <div class="col-md-3">
            <label class="form-label">
                Select Assessment Form <span class="required">*</span></label
            >
            <p-dropdown
                [(ngModel)]="selectedFormType"
                [required]="true"
                [options]="lstMaster"
                optionLabel="FormName"
                optionValue="FormMasterId"
                placeholder="Select"
                [style]="{ width: '100%' }"
                (onChange)="searchForm(selectedFormType, rangeDates)"
            >
            </p-dropdown>
        </div>

        <div class="col-md-6 d-flex mt-3">
            <span class="p-ml-left mr-4">
                <button
                    pButton
                    title="New"
                    label="Create Form"
                    (click)="showForm(selectedFormType)"
                ></button>
                <span class="total-txt"> </span>
            </span>
            <!-- <div class="mr-4">
                <span class="p-ml-left">
                    <button
                        pButton
                        title="New"
                        label="Search"
                        (click)="searchForm(selectedFormType, rangeDates)"
                    ></button>
                    <span class="total-txt"> </span>
                </span>
            </div> -->
            <div>
                <span class="p-ml-left">
                    <button
                        pButton
                        title="New"
                        label="Clear Search"
                        (click)="ResetModel()"
                    ></button>
                    <span class="total-txt"> </span>
                </span>
            </div>
        </div>
        <p-table
            #dt
            [value]="formDashboardList"
            responsiveLayout="scroll"
            class="mt-4"
            styleClass="p-datatable-striped"
            [rowHover]="true"
            [globalFilterFields]="['FormName', 'ModifiedOn']"
            [scrollable]="true"
            scrollHeight="calc(100vh - 155px)"
        >
            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="columns?.length">No records found</td>
                </tr>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="FormName">Assessment Form</th>
                    <th>Updated By</th>
                    <th>Designation</th>
                    <th>Status</th>
                    <th>Last Update</th>
                    <th>Actions</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-dt let-i="rowIndex">
                <tr>
                    <td>{{ dt.FormName }}</td>
                    <td>{{ dt.ModifiedBy }}</td>
                    <td>{{ dt.Designation }}</td>
                    <td>
                        {{ dt.IsCompleted == 1 ? "Completed" : "Incomplete" }}
                    </td>
                    <td>
                        {{
                            dt.ModifiedOn
                                | date : customDateFormat.DEF_DATE_TIME
                        }}
                    </td>
                    <td>
                        <a
                            title="View/Edit"
                            (click)="OpenForm(dt.FormMasterId, dt.FormId)"
                        >
                            <i class="fa fa-eye" aria-hidden="true"></i>
                        </a>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<!-- Dynamic Form Component -->
<div #formContainer></div>
